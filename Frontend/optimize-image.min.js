import fs from"fs";import path from"path";import sharp from"sharp";const inputDir="./images",outputDir="./images/optimized";fs.mkdirSync(outputDir,{recursive:!0}),fs.readdirSync(inputDir).forEach((i=>{if(i.match(/\.(jpg|jpeg|png)$/i)){const r=path.join(inputDir,i),t=path.join(outputDir,`${path.parse(i).name}.webp`);sharp(r).resize({width:800}).webp({quality:80}).toFile(t).then((()=>console.log(`✅ Optimized: ${i}`))).catch((r=>console.error(`❌ Error optimizing ${i}:`,r)))}}));