const IMAGE_PATHS=["images/optimized/e19.webp","images/optimized/e16.webp","images/optimized/e21.webp"],SLIDE_DURATION=4e3;let current=0,timer=null;const slides=Array.from(document.querySelectorAll(".slide")),progressSlots=Array.from(document.querySelectorAll(".progress-slot")),heroLayer=document.getElementById("heroLayer");function preloadImages(e){e.forEach((e=>{(new Image).src=e}))}function setHeroImage(e,t=!1){heroLayer&&(heroLayer.style.transition=t?"none":"opacity 900ms cubic-bezier(.22,.9,.35,1)",heroLayer.style.opacity=0,setTimeout((()=>{heroLayer.style.backgroundImage=`url("${IMAGE_PATHS[e]}")`,heroLayer.style.opacity=1}),60))}function setActiveSlide(e){e=(e+slides.length)%slides.length,slides.forEach(((t,s)=>{const o=s===e;t.classList.toggle("active",o),t.setAttribute("aria-hidden",String(!o))})),setHeroImage(e),progressSlots.forEach(((t,s)=>{t.classList.toggle("active",s===e),s===e&&(t.querySelector("::after"),t.style.setProperty("--restart",Date.now()))})),current=e}function startAuto(){stopAuto(),progressSlots.forEach(((e,t)=>e.classList.toggle("active",t===current))),timer=setInterval((()=>{setActiveSlide((current+1)%slides.length)}),4e3)}function stopAuto(){timer&&(clearInterval(timer),timer=null)}preloadImages(IMAGE_PATHS),progressSlots.forEach((e=>{e.addEventListener("click",(t=>{const s=Number(e.dataset.index);stopAuto(),setActiveSlide(s),startAuto()}))})),document.addEventListener("keydown",(e=>{if("ArrowRight"===e.key&&(stopAuto(),setActiveSlide(current+1),startAuto()),"ArrowLeft"===e.key&&(stopAuto(),setActiveSlide(current-1),startAuto()),"Escape"===e.key){const e=document.getElementById("searchOverlay");e&&e.classList.contains("active")&&document.getElementById("closeSearch").click()}}));const navToggle=document.getElementById("navToggle"),navLinks=document.getElementById("navLinks");navToggle&&navLinks&&navToggle.addEventListener("click",(()=>{const e=navLinks.classList.toggle("open");navToggle.setAttribute("aria-expanded",e?"true":"false")}));const searchBtn=document.getElementById("searchBtn"),searchOverlay=document.getElementById("searchOverlay"),closeSearch=document.getElementById("closeSearch"),searchInput=document.getElementById("searchInput");searchBtn&&searchOverlay&&closeSearch&&(searchBtn.addEventListener("click",(()=>{searchOverlay.classList.add("active"),searchOverlay.setAttribute("aria-hidden","false"),stopAuto(),setTimeout((()=>searchInput&&searchInput.focus()),150)})),closeSearch.addEventListener("click",(()=>{searchOverlay.classList.remove("active"),searchOverlay.setAttribute("aria-hidden","true"),startAuto()})));const siteHeader=document.getElementById("siteHeader");window.addEventListener("scroll",(()=>{const e=document.querySelector(".nav");window.scrollY>.12*window.innerHeight?e.classList.add("scrolled"):e.classList.remove("scrolled")}));const reduceMotion=window.matchMedia("(prefers-reduced-motion: reduce)");reduceMotion&&reduceMotion.matches?(heroLayer.style.transition="none",setHeroImage(0,!0),setActiveSlide(0)):(setHeroImage(0,!0),setActiveSlide(0),setTimeout((()=>startAuto()),600));const aboutSection=document.querySelector(".about-parallax");window.addEventListener("scroll",(()=>{aboutSection.getBoundingClientRect().top<.8*window.innerHeight&&aboutSection.classList.add("is-visible")}));const menuToggle=document.getElementById("menuToggle"),slideMenu=document.getElementById("slideMenu"),overlayBg=document.getElementById("overlayBg"),btnClose=document.getElementById("btnClose");menuToggle.addEventListener("click",(()=>{slideMenu.classList.add("active"),overlayBg.classList.add("active"),menuToggle.classList.add("active")})),btnClose.addEventListener("click",(()=>{slideMenu.classList.remove("active"),overlayBg.classList.remove("active"),menuToggle.classList.remove("active")})),overlayBg.addEventListener("click",(()=>{slideMenu.classList.remove("active"),overlayBg.classList.remove("active"),menuToggle.classList.remove("active")}));